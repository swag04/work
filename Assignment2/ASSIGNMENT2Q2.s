	 AREA     appcode, CODE, READONLY
     EXPORT __main
	 IMPORT printMsg
     ENTRY 
__main  FUNCTION	
; IGNORE THIS PART
; tan(x) code
 
		VLDR.F S0,= 6.283185 ; X VALUE IS LOADED HERE
		VMOV.F S4,S0  ; X
		VLDR.F S5,= 1
		LDR R6,= 0x00000000 ;
		VLDR.F S6,= 1
		VLDR.F S7,= 1
		VLDR.F S10,= 1 ; CONSTANT VALUE USED FOR COMPARISON
		
		LDR R3,= 0x00000016 ; N VALUE LOADED HERE
		VMOV.F S3,R3 ; N
		VCVT.F32.U32 S3,S3
		;ADD R2,R3,R3 ; 2N
		;VMOV.F S2,R2 ; 2N
		;VCVT.F32.U32 S2,S2
		LDR R4,= 0x00000000 ; 
		LDR R10,= 0x00000000 ; 
		LDR R5,= 0x00000000 ; 
		LDR R0,= 0x00000001 ;
		VLDR.F S9,= 0 ; FINAL RESULT WILL BE STORED IN S9
		
NEXTITR
		LDR R12,= 0x00000000 ; R12 = 0 FOR COS FUNCTION
		CMP R10,R3
		BNE COSFUN
		VMOV.F S11,S9 ; FINAL COS(X) RESULT
		LDR R12,= 0x00000001 ; R12 = 1 FOR SINE FUNCTION
		LDR R4,= 0x00000000 ;
		LDR R10,= 0x00000000 ; 
		;LDR R11,= 0x00000000 ;
		BEQ SINEFUN
		
		
NEXTITRSINE
		
		CMP R10,R3 ;
		BNE SINEFUN
		VMOV.F S12,S9 ; FINAL SIN(X) RESULT
		VDIV.F S9,S12,S11 ; FINAL RESULT OF tan(X)
		B stop
		
COSFUN
		B EVENODD ; TO DETECT n IS EVEN/ODD
		
; SIN(X) IS FOUND OUT IN THIS LOOP
SINEFUN
		AND R7,R4,#0x00000001
		ADD R4,R4,R4 
		ADD R4,#0x00000001
		CMP R4,#0x00000001
		LDR R5,= 0x00000000 ; 
		LDR R6,= 0x00000000 ;
		VLDR.F S5,= 1
		BEQ FIRSTITRSINE
		BNE POW1
; SERIES IS IMPLEMENTED ITERATIVELY HERE		
LOOP 
		VDIV.F S8,S0,S5
		CMP R7,R0
		ITE LT
		VADDLT.F S9,S9,S8
		VSUBGE.F S9,S9,S8 ; COS(X) RESULT IS STORED HERE
		ADD R10,#0x00000001
		MOV R4,R10
		VLDR.F S5,= 1
		VMOV.F S0,S4
		LDR R6,= 0x00000000 ;
		VLDR.F S6,= 1
		LDR R5,= 0x00000000 ; 
		CMP R12,#0x00000001
		BEQ NEXTITRSINE
		BNE NEXTITR 
		
; THIS LOOP IS USED TO FIND OUT X^2n OR X^(2n+1)
COSPOW 
		ADD R4,R4,R4
		CMP R4,#0x00000000
		BEQ FIRSTITR
		BNE POW1
POW1		

		SUB R11,R4,#0x00000001
		VMUL.F S0,S0,S4 ; S0 HAVE POWER VALUE
		ADD R5,#0x00000001
		CMP R5,R11
		BNE POW1
		BEQ FACT
		
FIRSTITR
		VMOV.F S0,S10
		VMOV.F S5,S10
		B LOOP
		
FIRSTITRSINE

		VMOV.F S0,S4
		VMOV.F S5,S4
		VMOV.F S9,S4
		ADD R10,#0x00000001
		mov r4,r10
		B NEXTITRSINE

; THIS LOOP IS USED TO FIND OUT FACTORIAL OF A NUMBER
FACT 
		CMP R4,#0x00000000
		BEQ FIRSTITR
		VMUL.F S5,S5,S6 ; S5 HAVE FACTORIAL RESULT
		;BGE COSLOOP
		ADD R6,#0x00000001
		VMOV.F S6,R6
		VCVT.F32.U32 S6,S6
		VADD.F S6,S6,S10
		CMP R6,R4
		BNE FACT
		BEQ LOOP
		
EVENODD
		AND R7,R4,#0x00000001
		B COSPOW
		
		
stop    B stop ; stop program
        ENDFUNC
        END 		
		
		